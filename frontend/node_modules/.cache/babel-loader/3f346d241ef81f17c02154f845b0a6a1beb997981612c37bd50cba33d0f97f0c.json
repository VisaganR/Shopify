{"ast":null,"code":"import{Elements}from\"@stripe/react-stripe-js\";import{loadStripe}from\"@stripe/stripe-js\";import React from\"react\";import{Alert,Col,Container,Row,Table}from\"react-bootstrap\";import{useSelector}from\"react-redux\";import CheckoutForm from\"../components/CheckoutForm\";import{useIncreaseCartProductMutation,useDecreaseCartProductMutation,useRemoveFromCartMutation}from\"../services/appApi\";import\"./CartPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const stripePromise=loadStripe(\"your_stripe_publishable_key\");function CartPage(){const user=useSelector(state=>state.user);const products=useSelector(state=>state.products);const userCartObj=user.cart;let cart=products.filter(product=>userCartObj[product._id]!=null);const[increaseCart]=useIncreaseCartProductMutation();const[decreaseCart]=useDecreaseCartProductMutation();const[removeFromCart,{isLoading}]=useRemoveFromCartMutation();function handleDecrease(product){const quantity=user.cart.count;if(quantity<=0)return alert(\"Can't proceed\");decreaseCart(product);}return/*#__PURE__*/_jsx(Container,{style:{minHeight:\"95vh\"},className:\"cart-container\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-2 h3\",children:\"Shopping cart\"}),cart.length==0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"Shopping cart is empty. Add products to your cart\"}):/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})})]}),cart.length>0&&/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{responsive:\"sm\",className:\"cart-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\xA0\"}),/*#__PURE__*/_jsxs(\"td\",{children:[!isLoading&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times\",style:{marginRight:10,cursor:\"pointer\"},onClick:()=>removeFromCart({productId:item._id,price:item.price,userId:user._id})}),/*#__PURE__*/_jsx(\"img\",{src:item.pictures[0].url,style:{width:100,height:100,objectFit:\"cover\"}})]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"quantity-indicator\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-minus-circle\",onClick:()=>handleDecrease({productId:item._id,price:item.price,userId:user._id})}),/*#__PURE__*/_jsx(\"span\",{children:user.cart[item._id]}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus-circle\",onClick:()=>increaseCart({productId:item._id,price:item.price,userId:user._id})})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price*user.cart[item._id]]})]}))})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"h4 pt-4\",children:[\"Total: $\",user.cart.total]})})]})})]})});}export default CartPage;","map":{"version":3,"names":["Elements","loadStripe","React","Alert","Col","Container","Row","Table","useSelector","CheckoutForm","useIncreaseCartProductMutation","useDecreaseCartProductMutation","useRemoveFromCartMutation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","stripePromise","CartPage","user","state","products","userCartObj","cart","filter","product","_id","increaseCart","decreaseCart","removeFromCart","isLoading","handleDecrease","quantity","count","alert","style","minHeight","className","children","length","variant","stripe","md","responsive","map","item","marginRight","cursor","onClick","productId","price","userId","src","pictures","url","width","height","objectFit","total"],"sources":["C:/Users/91637/OneDrive/Desktop/E-commerce/frontend/src/pages/CartPage.js"],"sourcesContent":["import { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport React from \"react\";\r\nimport { Alert, Col, Container, Row, Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport CheckoutForm from \"../components/CheckoutForm\";\r\nimport { useIncreaseCartProductMutation, useDecreaseCartProductMutation, useRemoveFromCartMutation } from \"../services/appApi\";\r\nimport \"./CartPage.css\";\r\n\r\nconst stripePromise = loadStripe(\"your_stripe_publishable_key\");\r\n\r\nfunction CartPage() {\r\n    const user = useSelector((state) => state.user);\r\n    const products = useSelector((state) => state.products);\r\n    const userCartObj = user.cart;\r\n    let cart = products.filter((product) => userCartObj[product._id] != null);\r\n    const [increaseCart] = useIncreaseCartProductMutation();\r\n    const [decreaseCart] = useDecreaseCartProductMutation();\r\n    const [removeFromCart, { isLoading }] = useRemoveFromCartMutation();\r\n\r\n    function handleDecrease(product) {\r\n        const quantity = user.cart.count;\r\n        if (quantity <= 0) return alert(\"Can't proceed\");\r\n        decreaseCart(product);\r\n    }\r\n\r\n    return (\r\n        <Container style={{ minHeight: \"95vh\" }} className=\"cart-container\">\r\n            <Row>\r\n                <Col>\r\n                    <h1 className=\"pt-2 h3\">Shopping cart</h1>\r\n                    {cart.length == 0 ? (\r\n                        <Alert variant=\"info\">Shopping cart is empty. Add products to your cart</Alert>\r\n                    ) : (\r\n                        <Elements stripe={stripePromise}>\r\n                            <CheckoutForm />\r\n                        </Elements>\r\n                    )}\r\n                </Col>\r\n                {cart.length > 0 && (\r\n                    <Col md={5}>\r\n                        <>\r\n                            <Table responsive=\"sm\" className=\"cart-table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>&nbsp;</th>\r\n                                        <th>Product</th>\r\n                                        <th>Price</th>\r\n                                        <th>Quantity</th>\r\n                                        <th>Subtotal</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {/* loop through cart products */}\r\n                                    {cart.map((item) => (\r\n                                        <tr>\r\n                                            <td>&nbsp;</td>\r\n                                            <td>\r\n                                                {!isLoading && <i className=\"fa fa-times\" style={{ marginRight: 10, cursor: \"pointer\" }} onClick={() => removeFromCart({ productId: item._id, price: item.price, userId: user._id })}></i>}\r\n                                                <img src={item.pictures[0].url} style={{ width: 100, height: 100, objectFit: \"cover\" }} />\r\n                                            </td>\r\n                                            <td>${item.price}</td>\r\n                                            <td>\r\n                                                <span className=\"quantity-indicator\">\r\n                                                    <i className=\"fa fa-minus-circle\" onClick={() => handleDecrease({ productId: item._id, price: item.price, userId: user._id })}></i>\r\n                                                    <span>{user.cart[item._id]}</span>\r\n                                                    <i className=\"fa fa-plus-circle\" onClick={() => increaseCart({ productId: item._id, price: item.price, userId: user._id })}></i>\r\n                                                </span>\r\n                                            </td>\r\n                                            <td>${item.price * user.cart[item._id]}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </Table>\r\n                            <div>\r\n                                <h3 className=\"h4 pt-4\">Total: ${user.cart.total}</h3>\r\n                            </div>\r\n                        </>\r\n                    </Col>\r\n                )}\r\n            </Row>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default CartPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}