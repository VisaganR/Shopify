{"ast":null,"code":"import axios from\"../axios\";import React,{useEffect,useState}from\"react\";import AliceCarousel from\"react-alice-carousel\";import\"react-alice-carousel/lib/alice-carousel.css\";import{Container,Row,Col,Badge,ButtonGroup,Form,Button}from\"react-bootstrap\";import{useSelector}from\"react-redux\";import{useParams}from\"react-router-dom\";import Loading from\"../components/Loading\";import SimilarProduct from\"../components/SimilarProduct\";import\"./ProductPage.css\";import{LinkContainer}from\"react-router-bootstrap\";import{useAddToCartMutation}from\"../services/appApi\";import ToastMessage from\"../components/ToastMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductPage(){const{id}=useParams();const user=useSelector(state=>state.user);const[product,setProduct]=useState(null);const[similar,setSimilar]=useState(null);const[addToCart,{isSuccess}]=useAddToCartMutation();const handleDragStart=e=>e.preventDefault();useEffect(()=>{axios.get(\"/products/\".concat(id)).then(_ref=>{let{data}=_ref;setProduct(data.product);setSimilar(data.similar);});},[id]);if(!product){return/*#__PURE__*/_jsx(Loading,{});}const responsive={0:{items:1},568:{items:2},1024:{items:3}};const images=product.pictures.map(picture=>/*#__PURE__*/_jsx(\"img\",{className:\"product__carousel--image\",src:picture.url,onDragStart:handleDragStart}));let similarProducts=[];if(similar){similarProducts=similar.map((product,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"item\",\"data-value\":idx,children:/*#__PURE__*/_jsx(SimilarProduct,{...product})}));}return/*#__PURE__*/_jsxs(Container,{className:\"pt-4\",style:{position:\"relative\"},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:6,children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:images,controlsStrategy:\"alternate\"})}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"pt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"primary\",children:product.category})}),/*#__PURE__*/_jsxs(\"p\",{className:\"product__price\",children:[\"$\",product.price]}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:\"justify\"},className:\"py-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",product.description]}),user&&!user.isAdmin&&/*#__PURE__*/_jsxs(ButtonGroup,{style:{width:\"90%\"},children:[/*#__PURE__*/_jsxs(Form.Select,{size:\"lg\",style:{width:\"40%\",borderRadius:\"0\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(Button,{size:\"lg\",onClick:()=>addToCart({userId:user._id,productId:id,price:product.price,image:product.pictures[0].url}),children:\"Add to cart\"})]}),user&&user.isAdmin&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{size:\"lg\",children:\"Edit Product\"})}),isSuccess&&/*#__PURE__*/_jsx(ToastMessage,{bg:\"info\",title:\"Added to cart\",body:\"\".concat(product.name,\" is in your cart\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Similar Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center flex-wrap\",children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:similarProducts,responsive:responsive,controlsStrategy:\"alternate\"})})]})]});}export default ProductPage;","map":{"version":3,"names":["axios","React","useEffect","useState","AliceCarousel","Container","Row","Col","Badge","ButtonGroup","Form","Button","useSelector","useParams","Loading","SimilarProduct","LinkContainer","useAddToCartMutation","ToastMessage","jsx","_jsx","jsxs","_jsxs","ProductPage","id","user","state","product","setProduct","similar","setSimilar","addToCart","isSuccess","handleDragStart","e","preventDefault","get","concat","then","_ref","data","responsive","items","images","pictures","map","picture","className","src","url","onDragStart","similarProducts","idx","children","style","position","lg","mouseTracking","controlsStrategy","name","bg","category","price","textAlign","description","isAdmin","width","Select","size","borderRadius","value","onClick","userId","_id","productId","image","to","title","body"],"sources":["C:/Users/91637/OneDrive/Desktop/E-commerce/frontend/src/pages/ProductPage.js"],"sourcesContent":["import axios from \"../axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport AliceCarousel from \"react-alice-carousel\";\r\nimport \"react-alice-carousel/lib/alice-carousel.css\";\r\nimport { Container, Row, Col, Badge, ButtonGroup, Form, Button } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Loading from \"../components/Loading\";\r\nimport SimilarProduct from \"../components/SimilarProduct\";\r\nimport \"./ProductPage.css\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { useAddToCartMutation } from \"../services/appApi\";\r\nimport ToastMessage from \"../components/ToastMessage\";\r\n\r\nfunction ProductPage() {\r\n    const { id } = useParams();\r\n    const user = useSelector((state) => state.user);\r\n    const [product, setProduct] = useState(null);\r\n    const [similar, setSimilar] = useState(null);\r\n    const [addToCart, { isSuccess }] = useAddToCartMutation();\r\n\r\n    const handleDragStart = (e) => e.preventDefault();\r\n    useEffect(() => {\r\n        axios.get(`/products/${id}`).then(({ data }) => {\r\n            setProduct(data.product);\r\n            setSimilar(data.similar);\r\n        });\r\n    }, [id]);\r\n\r\n    if (!product) {\r\n        return <Loading />;\r\n    }\r\n    const responsive = {\r\n        0: { items: 1 },\r\n        568: { items: 2 },\r\n        1024: { items: 3 },\r\n    };\r\n\r\n    const images = product.pictures.map((picture) => <img className=\"product__carousel--image\" src={picture.url} onDragStart={handleDragStart} />);\r\n\r\n    let similarProducts = [];\r\n    if (similar) {\r\n        similarProducts = similar.map((product, idx) => (\r\n            <div className=\"item\" data-value={idx}>\r\n                <SimilarProduct {...product} />\r\n            </div>\r\n        ));\r\n    }\r\n\r\n    return (\r\n        <Container className=\"pt-4\" style={{ position: \"relative\" }}>\r\n            <Row>\r\n                <Col lg={6}>\r\n                    <AliceCarousel mouseTracking items={images} controlsStrategy=\"alternate\" />\r\n                </Col>\r\n                <Col lg={6} className=\"pt-4\">\r\n                    <h1>{product.name}</h1>\r\n                    <p>\r\n                        <Badge bg=\"primary\">{product.category}</Badge>\r\n                    </p>\r\n                    <p className=\"product__price\">${product.price}</p>\r\n                    <p style={{ textAlign: \"justify\" }} className=\"py-3\">\r\n                        <strong>Description:</strong> {product.description}\r\n                    </p>\r\n                    {user && !user.isAdmin && (\r\n                        <ButtonGroup style={{ width: \"90%\" }}>\r\n                            <Form.Select size=\"lg\" style={{ width: \"40%\", borderRadius: \"0\" }}>\r\n                                <option value=\"1\">1</option>\r\n                                <option value=\"2\">2</option>\r\n                                <option value=\"3\">3</option>\r\n                                <option value=\"4\">4</option>\r\n                                <option value=\"5\">5</option>\r\n                            </Form.Select>\r\n                            <Button size=\"lg\" onClick={() => addToCart({ userId: user._id, productId: id, price: product.price, image: product.pictures[0].url })}>\r\n                                Add to cart\r\n                            </Button>\r\n                        </ButtonGroup>\r\n                    )}\r\n                    {user && user.isAdmin && (\r\n                        <LinkContainer to={`/product/${product._id}/edit`}>\r\n                            <Button size=\"lg\">Edit Product</Button>\r\n                        </LinkContainer>\r\n                    )}\r\n                    {isSuccess && <ToastMessage bg=\"info\" title=\"Added to cart\" body={`${product.name} is in your cart`} />}\r\n                </Col>\r\n            </Row>\r\n            <div className=\"my-4\">\r\n                <h2>Similar Products</h2>\r\n                <div className=\"d-flex justify-content-center align-items-center flex-wrap\">\r\n                    <AliceCarousel mouseTracking items={similarProducts} responsive={responsive} controlsStrategy=\"alternate\" />\r\n                </div>\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default ProductPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}